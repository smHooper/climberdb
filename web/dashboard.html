<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<meta name="viewport" content="width=device-width,height=device-height, user-scalable=no" />
	<title>Home - DENA Climbing Permits</title>
	<link rel="icon" type="image/x-icon" href="/imgs/favicon.ico">
	<!--jquery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	
	<!-- bootstrap -->
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"/>
	<script src="packages/bootstrap/bootstrap.min.js"></script>

	<!--fonts -->
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">

	<!-- font awesome --> 
	<link href="packages/fontawesome/css/all.min.css" rel="stylesheet">

	<!-- chart.js -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.2.0/chart.min.js"></script>

	<link rel="stylesheet" href="css/climberdb.css">
	<link rel="stylesheet" href="css/dashboard.css">

</head>

<body>
	<main id="climberdb-main-content" class="climberdb-main">
		<div class="main-container-with-sidebar">
			<!--main content -->
			<div class="main-content-wrapper">
				<div class="main-dashboard-container container-fluid">
					<!-- season mountain stats -->
					<div class="col-md col-lg-4 card-container">
						<div id="season-mountain-stats-card" class="card dashboard-card">
							<h4 class="dashboard-card-header">Mountain Stats This Season</h4>
							<h5 class="w-100 text-center hidden">Total registered climbers: <span class="total-registered-climbers-count"></span></h5>
							<div class="dashboard-card-body">
								<table class="climberdb-dashboard-table climberdb-data-table mountain-stats-table">
									<thead>
										<tr>
											<th></th>
											<th>Denali*</th>
											<th>Foraker*</th>
											<th>Either</th>
										</th>
									</thead>
									<tbody></tbody>
								</table>
							</div>
							<h6 class="footnote w-100">*Includes climbers only on this mountain</h6>
						</div>
					</div>
					<!-- flagged and solo expeditions -->
					<div class="col-md col-lg-4 card-container">
						<div id="flagged-groups-card" class="card dashboard-card half-height-card">
							<h4 class="dashboard-card-header">Flagged Expeditions <span class="table-row-counter"></span></h4>
							<div class="dashboard-card-body mt-0">
								<table class="climberdb-dashboard-table climberdb-data-table tight-layout">
									<thead>
										<tr>
											<th>
												<button class="text-only-button sort-column-button" data-field-name="expedition_name">
													<span>Expedition</span>
													<i class="fa fa-solid fa-sort fa-circle-sort-up"></i>
												</button>
											</th>
											<th>
												<button class="text-only-button sort-column-button sorted" data-field-name="departure">
													<span>Departure</span>
													<i class="fa fa-solid fa-sort fa-circle-sort-up"></i>
												</button>
											</th>
											<th>Commments</th>
										</tr>
									</thead>
									<tbody>
										<tr class="cloneable hidden">
											<td><a href="expeditions.html?id={expedition_id}" target="_blank">{expedition_name}</a></td>
											<td class="centered-text">{departure}</td>
											<td>{flagged_comments}</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div id="solo-climbers-card" class="card dashboard-card half-height-card">
							<h4 class="dashboard-card-header">Confirmed Solo Climbers <span class="table-row-counter"></span></h4>
							<div class="dashboard-card-body mt-0">
								<table class="climberdb-dashboard-table climberdb-data-table tight-layout">
									<thead>
										<tr>
											<th>
												<button class="text-only-button sort-column-button" data-field-name="climber_name">
													<span>Name</span>
													<i class="fa fa-solid fa-sort fa-circle-sort-up"></i>
												</button>
											</th>
											<th>
												<button class="text-only-button sort-column-button" data-field-name="status">
													<span>Status</span>
													<i class="fa fa-solid fa-sort fa-circle-sort-up"></i>
												</button>
											</th>
											<th>
												<button class="text-only-button sort-column-button sorted" data-field-name="departure">
													<span>Departure</span>
													<i class="fa fa-solid fa-sort fa-circle-sort-up"></i>
												</button>
											</th>
											<th>
												<button class="text-only-button sort-column-button sorted" data-field-name="planned_return">
													<span class="text-nowrap">Planned return</span> <!-- force to single row-->
													<i class="fa fa-solid fa-sort fa-circle-sort-up"></i>
												</button>
											</th>
										</tr>
									</thead>
									<tbody>
										<tr class="cloneable hidden">
											<td><a href="expeditions.html?id={expedition_id}" target="_blank">{climber_name}</a></td>
											<td class=>{status}</td>
											<td class="centered-text">{departure}</td>
											<td class="centered-text">{planned_return}</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>

					<!-- group status -->
					<div class="col-md col-lg-4 card-container">
						<div id="group-status-card" class="card dashboard-card">
							<h4 class="dashboard-card-header w-100 centered-text">Expedition Status</h4>
							<div class="dashboard-card-body h-100">
								<div class="group-status-graph-container">
									<div class="group-status-row" data-status-code="1">
										<label class="group-status-bar-label">Pending</label>
										<div class="group-status-bar-container">
											<div class="group-status-bar"></div>
											<div class="group-status-bar-text count-up"></div>
											<div class="group-status-bar-dropdown">
												<div class="group-status-bar-dropdown-header">
													<button class="close text-only-button">&times</button>
												</div>
												<div class="group-status-bar-dropdown-content">
												</div>
											</div>
										</div>
									</div>
									<div class="group-status-row" data-status-code="2">
										<label class="group-status-bar-label">Ready for review</label>
										<div class="group-status-bar-container">
											<div class="group-status-bar"></div>
											<div class="group-status-bar-text count-up"></div>
											<div class="group-status-bar-dropdown">
												<div class="group-status-bar-dropdown-header">
													<button class="close">&times</button>
												</div>
												<div class="group-status-bar-dropdown-content">
												</div>
											</div>
										</div>
									</div>
									<div class="group-status-row" data-status-code="3">
										<label class="group-status-bar-label">Confirmed</label>
										<div class="group-status-bar-container">
											<div class="group-status-bar"></div>
											<div class="group-status-bar-text count-up"></div>
											<div class="group-status-bar-dropdown">
												<div class="group-status-bar-dropdown-header">
													<button class="close">&times</button>
												</div>
												<div class="group-status-bar-dropdown-content">
												</div>
											</div>
										</div>
									</div>
									<div class="group-status-row" data-status-code="4">
										<label class="group-status-bar-label">On mountain</label>
										<div class="group-status-bar-container">
											<div class="group-status-bar"></div>
											<div class="group-status-bar-text count-up"></div>
											<div class="group-status-bar-dropdown">
												<div class="group-status-bar-dropdown-header">
													<button class="close">&times</button>
												</div>
												<div class="group-status-bar-dropdown-content">
												</div>
											</div>
										</div>
									</div>
									<div class="group-status-row" data-status-code="5">
										<label class="group-status-bar-label">Off mountain</label>
										<div class="group-status-bar-container">
											<div class="group-status-bar"></div>
											<div class="group-status-bar-text count-up"></div>
											<div class="group-status-bar-dropdown">
												<div class="group-status-bar-dropdown-header">
													<button class="close">&times</button>
												</div>
												<div class="group-status-bar-dropdown-content">
												</div>
											</div>
										</div>
									</div>
									<div class="group-status-row" data-status-code="6">
										<label class="group-status-bar-label">Cancelled</label>
										<div class="group-status-bar-container">
											<div class="group-status-bar"></div>
											<div class="group-status-bar-text count-up"></div>
											<div class="group-status-bar-dropdown">
												<div class="group-status-bar-dropdown-header">
													<button class="close">&times</button>
												</div>
												<div class="group-status-bar-dropdown-content">
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- breifings per day -->
					<div class="col-md col-lg-8 card-container small-row">
						<div class="card dashboard-card">
							<h4 class="dashboard-card-header w-100 centered-text">Scheduled Expedition Briefings per Day</h4>
							<div class="scrollable-chart-and-axis-wrapper">
								<div class="scrollable-chart-outer-wrapper">
									<div class="scrollable-chart-inner-wrapper">
										<canvas id="daily-briefings-chart" class="climberdb-chart" height="310"></canvas>
									</div>
								</div>
								<!-- for a horizontally scrollable chart, the axis has to be a separate plot outside the scrollable div-->
								<canvas id="daily-briefings-axis" class="climberdb-chart" height="310" width="0"></canvas>
							</div>
						</div>
					</div>

					<!-- expeditions that still need to pay and turn in application -->
					<div class="col-md col-lg-4 card-container small-row">
						<div id="missing-sup-fee-groups-card" class="card dashboard-card">
							<h4 class="dashboard-card-header">Missing SUP or Climber Fee <span class="table-row-counter"></span></h4>
							<div class="dashboard-card-body">
								<table class="climberdb-dashboard-table climberdb-data-table tight-layout">
									<thead>
										<tr>
											<th class="col-4">
												<button class="text-only-button sort-column-button" data-field-name="expedition_name">
													<span>Name</span>
													<i class="fa fa-solid fa-sort fa-circle-sort-up"></i>
												</button>
											</th>
											<th>
												<button class="text-only-button sort-column-button sorted" data-field-name="days_to_departure">
													<span>Days to Departure</span>
													<i class="fa fa-solid fa-sort fa-circle-sort-up"></i>
												</button>
											</th>
											<th>Missing SUP App.</th>
											<th>Missing Fee</th>
										</tr>
									</thead>
									<tbody>
										<tr class="cloneable hidden">
											<td><a href="expeditions.html?id={expedition_id}" target="_blank">{expedition_name}</a></td>
											<td class="centered-text">{days_to_departure}</td>
											<td class="centered-text">{missing_sup}</td>
											<td class="centered-text">{missing_payment}</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
	</main>
	 <!-- loading indicator should be hidden and will only be shown when loading data -->
	<div id="loading-indicator-background" class="modal-background modal-background-light hidden" ></div>
	<div id="loading-indicator" class="hidden"></div>

	<!--alert/message modal -->
	<div class="modal fade" id="alert-modal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true"></div>

	<script src="js/climberdb.js"></script>
	<script src="js/dashboard.js"></script>
	
	<script>
		var climberDB;
		$(document).ready(function(){

			climberDB = new ClimberDBDashboard();
			climberDB.init(); 


		});
	</script>

</body>

</html>
